(this["webpackJsonporca-dash"]=this["webpackJsonporca-dash"]||[]).push([[0],{128:function(e,a,t){},131:function(e,a,t){"use strict";t.r(a);var l=t(4),s=t.n(l),i=t(71),n=t.n(i),r=t(17),c=t(44),o=t(2),d=t(3),m=t(5),h=t(6),u=t(72),g=t.n(u);function p(e){var a,t=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"m"},{value:1e9,symbol:"g"},{value:1e12,symbol:"t"},{value:1e15,symbol:"p"},{value:1e18,symbol:"e"}];for(a=t.length-1;a>0&&!(e>=t[a].value);a--);return(e/t[a].value).toFixed(2).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+t[a].symbol}var f=t(41),y=t(42);function v(){var e=Object(f.a)([""]);return v=function(){return e},e}function b(){var e=Object(f.a)([""]);return b=function(){return e},e}function w(){var e=Object(f.a)([""]);return w=function(){return e},e}var k=y.a.div(w()),x=y.a.nav(b()),D=y.a.button(v()),E=t(140),N={$schema:"https://vega.github.io/schema/vega-lite/v4.json",title:"Species call counts",description:"A basic stacked bar chart example.",width:1150,height:300,padding:5,background:"transparent",data:{name:"table"},mark:"bar",encoding:{x:{field:"date_time",type:"temporal",timeUnit:{unit:"yearmonthdatehoursminutes",step:15},scale:{type:"utc"},axis:{labelAngle:15},title:"Date-time",band:.5},y:{field:"calls",type:"quantitative",title:"Calls per 15 minutes"},color:{field:"type",type:"nominal",scale:{domain:["Blue_whale","Fin_whale"]},legend:{title:"Type"}},tooltip:[{field:"date_time",type:"temporal",timeUnit:"yearmonthdatehoursminutes"},{field:"calls",type:"quantitative"},{field:"type",type:"nominal"}]}},C={$schema:"https://vega.github.io/schema/vega/v5.json",title:"Diel plot for Blue whale",description:"A basic scatter plot example depicting automobile statistics.",background:"transparent",width:500,height:300,padding:5,data:[{name:"source",transform:[{type:"filter",expr:"datum['HourOfDay'] != null && datum['Day'] != null && datum['Calls'] != null"}]}],scales:[{name:"x",type:"linear",round:!0,nice:!0,zero:!0,domain:{data:"source",field:"HourOfDay"},range:"width"},{name:"y",type:"linear",round:!0,nice:!0,zero:!1,domain:{data:"source",field:"Day"},range:"height"},{name:"size",type:"linear",round:!0,nice:!1,zero:!0,domain:{data:"source",field:"Calls"},range:[4,361]}],axes:[{scale:"x",grid:!0,domain:!1,orient:"bottom",tickCount:6,title:"Hour of day (local time)"},{scale:"y",grid:!0,domain:!1,orient:"left",tickCount:5,titlePadding:5,title:"Day of month"}],legends:[{size:"size",title:"Calls",format:"s",symbolStrokeColor:"#4682b4",symbolStrokeWidth:2,symbolOpacity:.5,symbolType:"circle"}],marks:[{name:"marks",type:"symbol",from:{data:"source"},encode:{update:{x:{scale:"x",field:"HourOfDay"},y:{scale:"y",field:"Day"},size:{scale:"size",field:"Calls"},shape:{value:"circle"},strokeWidth:{value:2},opacity:{value:.5},stroke:{value:"#4682b4"},fill:{value:"transparent"}}}}]},A={$schema:"https://vega.github.io/schema/vega/v5.json",title:"Diel plot for Fin whale",description:"A basic scatter plot example depicting automobile statistics.",background:"transparent",width:500,height:300,padding:5,data:[{name:"source",transform:[{type:"filter",expr:"datum['HourOfDay'] != null && datum['Day'] != null && datum['Calls'] != null"}]}],scales:[{name:"x",type:"linear",round:!0,nice:!0,zero:!0,domain:{data:"source",field:"HourOfDay"},range:"width"},{name:"y",type:"linear",round:!0,nice:!0,zero:!1,domain:{data:"source",field:"Day"},range:"height"},{name:"size",type:"linear",round:!0,nice:!1,zero:!0,domain:{data:"source",field:"Calls"},range:[4,361]}],axes:[{scale:"x",grid:!0,domain:!1,orient:"bottom",tickCount:6,title:"Hour of day (local time)"},{scale:"y",grid:!0,domain:!1,orient:"left",tickCount:5,titlePadding:5,title:"Day of month"}],legends:[{size:"size",title:"Calls",format:"s",symbolStrokeColor:"#4682b4",symbolStrokeWidth:2,symbolOpacity:.5,symbolType:"circle"}],marks:[{name:"marks",type:"symbol",from:{data:"source"},encode:{update:{x:{scale:"x",field:"HourOfDay"},y:{scale:"y",field:"Day"},size:{scale:"size",field:"Calls"},shape:{value:"circle"},strokeWidth:{value:2},opacity:{value:.5},stroke:{value:"#4682b4"},fill:{value:"transparent"}}}}]},O={$schema:"https://vega.github.io/schema/vega/v3.0.json",background:"transparent",width:150,height:150,autosize:"pad",signals:[{name:"startAngle",value:0},{name:"endAngle",value:6.29},{name:"padAngle",value:0},{name:"sort",value:!0},{name:"strokeWidth",value:2},{name:"selected",value:"",on:[{events:"mouseover",update:"datum"}]}],data:[{name:"table",values:[{category:"Blue whale",calls:8},{category:"Other sounds",calls:10},{category:"Fin whale",calls:5}],transform:[{type:"pie",field:"calls",startAngle:{signal:"startAngle"},endAngle:{signal:"endAngle"},sort:{signal:"sort"}}]},{name:"fieldSum",source:"table",transform:[{type:"aggregate",fields:["calls"],ops:["sum"],as:["sum"]}]}],legends:[{fill:"color",title:"Type",orient:"none",padding:{value:10},encode:{symbols:{enter:{fillOpacity:{value:1}}},legend:{update:{x:{signal:"(width / 2) + if(selected && selected.category == datum.category, if(width >= height, height, width) / 2 * 1.1 * 0.8, if(width >= height, height, width) / 2 * 0.8)",offset:20},y:{signal:"(height / 2)",offset:-50}}}}}],scales:[{name:"color",type:"ordinal",range:{scheme:"category20"}}],marks:[{type:"arc",from:{data:"table"},encode:{enter:{fill:{scale:"color",field:"category"},x:{signal:"width / 2"},y:{signal:"height / 2"}},update:{startAngle:{field:"startAngle"},endAngle:{field:"endAngle"},padAngle:{signal:"if(selected && selected.category == datum.category, 0.015, 0.015)"},innerRadius:{signal:"if(selected && selected.category == datum.category, if(width >= height, height, width) / 2 * 0.45, if(width >= height, height, width) / 2 * 0.5)"},outerRadius:{signal:"if(selected && selected.category == datum.category, if(width >= height, height, width) / 2 * 1.05 * 0.8, if(width >= height, height, width) / 2 * 0.8)"},opacity:{signal:"if(selected && selected.category !== datum.category, 1, 1)"},stroke:{signal:"scale('color', datum.category)"},strokeWidth:{signal:"strokeWidth"},fillOpacity:{signal:"if(selected && selected.category == datum.category, 0.8, 0.8)"}}}},{type:"text",encode:{enter:{fill:{value:"#ffffff"},text:{value:""}},update:{opacity:{value:1},x:{signal:"width / 2"},y:{signal:"height / 2"},align:{value:"center"},baseline:{value:"middle"},fontSize:{signal:"if(width >= height, height, width) * 0.05"},text:{value:""}}}},{name:"mark_calls",type:"text",from:{data:"table"},encode:{enter:{text:{signal:"if(datum['endAngle'] - datum['startAngle'] < 0.3, '', datum['calls'])"},x:{signal:"if(width >= height, height, width) / 2"},y:{signal:"if(width >= height, height, width) / 2"},radius:{signal:"if(selected && selected.category == datum.category, if(width >= height, height, width) / 2 * 1.05 * 0.65, if(width >= height, height, width) / 2 * 0.65)"},theta:{signal:"(datum['startAngle'] + datum['endAngle'])/2"},fill:{value:"#FFFFFF"},fontSize:{value:12},align:{value:"center"},baseline:{value:"middle"}}}}]},F="https://sheets.googleapis.com/v4/spreadsheets/".concat("1UebD7Y3HSY-4-79JvAQgWPUKa1ZpeRKeqyLCvxVG1Ic","/values:batchGet?ranges=Sheet1!A:A&majorDimension=ROWS&key=").concat("AIzaSyAmzCeYhQO90JM5JjuELQb3tKheGqLhAks"),S=function(e){Object(m.a)(t,e);var a=Object(h.a)(t);function t(){var e;return Object(o.a)(this,t),(e=a.call(this)).getData=function(a){var t=new Date(e.state.startDate.split(" ")[0]),l=new Date(a.split(" - ")[0]),s=new Date(a.split(" - ")[1]),i=(l.getTime()-t.getTime())/864e5,n=(s.getTime()-t.getTime())/864e5;console.log(96*i+1+" "+96*(n+1));var r="https://sheets.googleapis.com/v4/spreadsheets/".concat("1UebD7Y3HSY-4-79JvAQgWPUKa1ZpeRKeqyLCvxVG1Ic","/values:batchGet?ranges=Sheet1!A").concat(96*i+1,":D").concat(96*(n+1),"&majorDimension=ROWS&key=").concat("AIzaSyAmzCeYhQO90JM5JjuELQb3tKheGqLhAks");fetch(r).then((function(e){return e.json()})).then((function(a){console.log(a);var t=a.valueRanges[0].values;console.log(t);for(var l=[],s=0;s<t.length;s++){var i={};i.Date_time=t[s][0],i.Blue_whale=t[s][1],i.Fin_whale=t[s][2],i.Other=t[s][3],l.push(i)}e.setState({items:l},(function(){return e.populateDashboard()}))}))},e.updateDashboard=function(a){e.getData(a.value),e.setState({selectedValue:a.value})},e.state={items:[],dropdownOptions:[],selectedValue:null,bwCalls:null,fwCalls:null,otCalls:null,totalCalls:null,pieData:{table:[]},barData:{table:[]},bwdielData:{source:[]},fwdielData:{source:[]},avgCallsTrend:[],startDate:null},e}return Object(d.a)(t,[{key:"populateDashboard",value:function(){var e,a=this.state.items,t=a.length,l=0,s=0,i=0,n=[],r=[],c=[],o=[],d=[],m=0;console.log(a);for(var h=0;h<t;h++){var u=(v=a[h].Date_time.split(" "))[0].split("/"),g=v[1].split(":"),f=parseInt(g[0])+g[1]/60;r.push({date_time:a[h].Date_time,calls:a[h].Blue_whale,type:"Blue_whale"}),r.push({date_time:a[h].Date_time,calls:a[h].Fin_whale,type:"Fin_whale"}),c.push({HourOfDay:f,Day:u[1],Calls:a[h].Blue_whale}),o.push({HourOfDay:f,Day:u[1],Calls:a[h].Fin_whale})}for(var y=0;y<t;y++){var v=a[y].Date_time.split(" ");m+=1,l+=parseInt(a[y].Blue_whale),s+=parseInt(a[y].Fin_whale),i+=parseInt(a[y].Other)}var b=(l/m*4).toFixed(2),w=(s/m*4).toFixed(2),k=(i/m*4).toFixed(2),x=parseInt(b)+parseInt(w)+parseInt(k);d.push({category:"Blue whale",calls:(b/x*100).toFixed(2)}),d.push({category:"Fin whale",calls:(w/x*100).toFixed(2)}),d.push({category:"Other sounds",calls:(k/x*100).toFixed(2)}),console.log(d),n.push({label:"Blue Whale",value:b,displayValue:"".concat(b," Calls")}),n.push({label:"Fin Whale",value:w,displayValue:"".concat(w," Calls")}),e=l+s+i,this.setState({bwCalls:b,fwCalls:w,otCalls:k,totalCalls:p(e/m*4),avgCallsTrend:n,pieData:{table:d},barData:{table:r},bwdielData:{source:c},fwdielData:{source:o}})}},{key:"componentDidMount",value:function(){var e=this;fetch(F).then((function(e){return e.json()})).then((function(a){console.log(a);for(var t=a.valueRanges[0].values,l=[],s=1;s<t.length;s+=672){var i=t[s][0].split(" "),n=(s+576>t.length?t[t.length-1][0]:t[s+576][0]).split(" ");l.push(i[0]+" - "+n[0])}l=Array.from(new Set(l)).reverse(),console.log(l),e.setState({dropdownOptions:l,selectedValue:l[0],startDate:l[l.length-1]},(function(){return e.getData(e.state.selectedValue)}))}))}},{key:"render",value:function(){return s.a.createElement(k,null,s.a.createElement(x,{className:"navbar navbar-expand-lg fixed-top is-white is-dark-text"},s.a.createElement(k,{className:"navbar-brand h1 mb-0 text-large font-medium"},"Orca Dashboard"),s.a.createElement(k,{className:"navbar-nav ml-auto"},s.a.createElement(k,{className:"user-detail-section"},s.a.createElement("a",{href:"https://join.slack.com/t/orcadashboardalert/shared_invite/zt-jrq0t43a-T3y0wKKDgc6uHv_FXHBYgA",target:"_blank"},s.a.createElement(D,{className:"button"},"Join Slack"))))),s.a.createElement(x,{className:"navbar fixed-top nav-secondary is-dark is-light-text"},s.a.createElement(k,{className:"text-medium"},"Summary / Weekly"),s.a.createElement(k,{className:"navbar-nav ml-auto"},s.a.createElement(g.a,{className:"pr-2 custom-dropdown",options:this.state.dropdownOptions,onChange:this.updateDashboard,value:this.state.selectedValue,placeholder:"Select an option"}))),s.a.createElement(k,{className:"container-fluid pr-5 pl-5 pt-5 pb-5"},s.a.createElement(k,{className:"row"},s.a.createElement(k,{className:"col-md-4 col-lg-3 is-light-text mb-4"},s.a.createElement(k,{className:"card grid-card is-card-dark"},s.a.createElement(k,{className:"card-heading mb-3"},s.a.createElement(k,{className:"is-dark-text-light letter-spacing text-small"},"Percentage Avg Calls/hr")),s.a.createElement(E.a,{spec:O,data:this.state.pieData,theme:"dark"}))),s.a.createElement(k,{className:"col-md-8 col-lg-9 is-light-text mb-4"},s.a.createElement(k,{className:"card is-card-dark chart-card"},s.a.createElement(k,{className:"row full-height"},s.a.createElement(k,{className:"col-sm-4 full height"},s.a.createElement(k,{className:"grid-card is-card-dark"},s.a.createElement(k,{className:"card-heading"},s.a.createElement(k,{className:"is-dark-text-light letter-spacing text-small"},"Blue Whale Avg Calls/hr")),s.a.createElement(k,{className:"card-value pt-4 text-x-large"},this.state.bwCalls))),s.a.createElement(k,{className:"col-sm-4 full-height border-left border-right"},s.a.createElement(k,{className:"chart-container full-height"},s.a.createElement(k,{className:"grid-card is-card-dark"},s.a.createElement(k,{className:"card-heading"},s.a.createElement(k,{className:"is-dark-text-light letter-spacing text-small"},"Fin Whale Avg Calls/hr")),s.a.createElement(k,{className:"card-value pt-4 text-x-large"},this.state.fwCalls)))),s.a.createElement(k,{className:"col-sm-4 full-height"},s.a.createElement(k,{className:"chart-container full-height"},s.a.createElement(k,{className:"grid-card is-card-dark"},s.a.createElement(k,{className:"card-heading"},s.a.createElement(k,{className:"is-dark-text-light letter-spacing text-small"},"Other Avg Sounds/hr")),s.a.createElement(k,{className:"card-value pt-4 text-x-large"},this.state.otCalls)))))))),s.a.createElement(k,{className:"row",style:{minHeight:"400px"}},s.a.createElement(k,{className:"col-md-12 mb-4"},s.a.createElement(k,{className:"card is-card-dark chart-card"},s.a.createElement(k,{className:"chart-container large full-height"},s.a.createElement(E.a,{spec:N,data:this.state.barData,theme:"dark"}))))),s.a.createElement(k,{className:"row",style:{minHeight:"400px"}},s.a.createElement(k,{className:"col-md-6 mb-4"},s.a.createElement(k,{className:"card is-card-dark chart-card"},s.a.createElement(k,{className:"chart-container large full-height"},s.a.createElement(E.a,{spec:C,data:this.state.bwdielData,theme:"dark"})))),s.a.createElement(k,{className:"col-md-6 mb-4"},s.a.createElement(k,{className:"card is-card-dark chart-card"},s.a.createElement(k,{className:"chart-container large full-height"},s.a.createElement(E.a,{spec:A,data:this.state.fwdielData,theme:"dark"})))))))}}]),t}(l.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(127),t(128),t(129);var _=Object(r.a)();n.a.render(s.a.createElement(c.b,{history:_},s.a.createElement(c.c,null,s.a.createElement(c.a,{path:"/",component:S}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},80:function(e,a,t){e.exports=t(131)}},[[80,1,2]]]);
//# sourceMappingURL=main.b6e89cf7.chunk.js.map